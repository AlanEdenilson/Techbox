<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <link rel="stylesheet" href="/stylesheets/estudiantes.css">
    <title>Estudiante</title>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <img src="/images/tci.png" >
    <div id="my-nav" class="collapse navbar-collapse">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" > 3Â° Mantenimiento automotriz <span class="sr-only">(current)</span></a>
                </li>
            </ul>
        </div>
    </nav>

<br/>
<br/>
<a href="/taller/agregar" class="btn btn-primary" type="button">Agregar Estudiante</a>
<br/>
<br/>

    <table id="table" class="table table-light">
        <thead class="thead-light">
            <tr>
                <th>id</th>
                <th>nombre</th>
                <th>Apellido</th>
                <th>gmail</th>
                <th>nie</th>
                <th>Acciones</th>
                
            </tr>
        </thead>
        <tbody>
             
            

                <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>

            <td>   
                <div class="btn-group-vertical" role="group" aria-label="b-form">

                   
                        <button class="btn btn-warning" type="submit">Editar</button>
                    
                </div>



                <div class="btn-group-vertical" role="group" aria-label="b-form">

                        <button class="btn btn-danger" type="submit">Eliminar</button>
                  
                </div>
                    </td>
                </tr>
            
    </tbody>
</table>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script >
    $(document).ready(function(){
        console.log('buscando estudiantels')

        $.ajax({
            url: '/One_T/verestudiantes',
            type: 'GET',
            success: function(data){
                console.log(data)
                var html;
                    for(var i=0; i<data.length; i++){
                        html=`
                         <tr>
                            <td>${data[i].id}</td>
                            <td> ${data[i].nombre}</td>
                            <td> ${data[i].apellido}</td>
                            <td>${data[i].correo}</td>
                            <td>${data[i].nie}</td>
                            <td>   
                            <div class="btn-group-vertical" role="group" aria-label="b-form">
                            <button data-id=${data[i].id} class="btn btn-warning" id="edit">Editar</button>
                            </div>


                                <div class="btn-group-vertical" role="group" aria-label="b-form">
                                <button id="delete" data-id=${data[i].id} class="btn btn-danger" >Eliminar</button>
                                </div>
                            </td>
                            
                        </tr>
                        `
    
                        $('#table').append(html)
                    }
              
                
            },
            error: function(error){
                console.log(error)
            }
        });


        $('#table').off('click', '#delete').on('click', '#delete', function() {
            var id = $(this).data('id')
           

        })

        
        $('#table').off('click', '#edit').on('click', '#edit', function() {
            var id = $(this).data('id')
            
            window.location.href="/One_T/editEstudent?id="+id

        })
    });

</script>
</body>
</html>